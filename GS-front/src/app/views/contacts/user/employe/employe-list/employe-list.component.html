<c-row class="mb-2">
    <c-nav class="hstack gap">
        <c-nav-item class="p-2 ms-auto">
            <button cButton color="info">
                Actualiser
            </button>
        </c-nav-item>
        <c-nav-item class="p-2">
            <button cButton color="primary" routerLink="create">Ajouter un nouveau employe</button>
        </c-nav-item>
    </c-nav>
</c-row>

<c-row>
    <c-col xs>
        <c-card class="mb-4">
            <c-card-body>
                <table [hover]="true" [responsive]="true" [striped]="true" align="middle" cTable class="mb-0 border">
                    <thead class="text-nowrap text-truncate">
                    <tr>
                                                    <th class="bg-body-tertiary">Code</th>
                            <th class="bg-body-tertiary">Nom</th>
                            <th class="bg-body-tertiary">Prénom</th>
                            <th class="bg-body-tertiary">Téléphone</th>
                            <th class="bg-body-tertiary"> Entreprise</th>
                        <th class="bg-body-tertiary" style="display: flex; justify-content: end;">Actions</th>
                    </tr>
                    </thead>
                    <tbody>
                    @for (it of employers; track it; let i = $index) {
                    <tr>
                            <td>{{ it.code }}</td>
                            <td>{{ it.nom }}</td>
                            <td>{{ it.prenom }}</td>
                            <td>{{ it.telephone }}</td>
                            <td>{{ it.entreprise != null ? it.entreprise.nom: "null" }}</td>
                        <td style="display: flex; justify-content: end;">
                            <button cButton color routerLink="update" (click)="item = it">
                                <svg cIcon name="cil-pen" size="xl" style="color: #61be04"></svg>
                            </button>
                            <button cButton color (click)="item = it; currentIndex = i; deleteModel=true">
                                <svg cIcon name="cil-trash" size="xl" style="color: #ef0a34"></svg>
                            </button>
                        </td>
                    </tr>
                    }
                    </tbody>
                </table>
            </c-card-body>
        </c-card>
    </c-col>
</c-row>

<c-modal [visible]="deleteModel" alignment="center" backdrop="static">
    <c-modal-header>
      <h5 cModalTitle style="color: black ; font-size: 20px ;font-family: 'Arial Black'">Confirmation de suppression</h5>
        <button cButtonClose (click)="deleteModel = false"></button>
    </c-modal-header>
  <c-modal-body style="color: #ef0a34 ;font-size: 18px; " >
    Êtes-vous sûr de vouloir supprimer cet employé ?
  </c-modal-body>
    <c-modal-footer>
        <button (click)="deleteModel = false" cButton color="secondary" variant="ghost">Fermer</button>
        <button cButton color="danger" (click)="delete()">Supprimer</button>
    </c-modal-footer>
</c-modal>
